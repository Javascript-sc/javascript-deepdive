* 39장 DOM

***** DOM(Document Object Model)은 HTML 문서의 계층적 구조와 정보를 표현하며 이를 제어할 수 있는 API, 즉 프로퍼티와 메서드를 제공하는 트리 자료 구조다.

---

* 39.1 노드

*** 39.1.1 HTML 요소와 노드 객체

- HTML(HyperText Markup Language) 요소는 HTML 문서를 구성하는 개별적인 요소를 의미한다.
- HTML 요소 구조

> 시작 태그(start tag)
>
>> 요소의 시작을 나타내는 태그이다. `<tagname>` 형식으로 작성.
>> 어트리뷰트 이름 (attribute name)
>> 어트리뷰트 값 (attribute value)
>> 콘텐츠 (contents)
>> 종료 태그 (end tag)
>> 요소의 끝을 나타내는 태그이다. `</tagname>` 형식으로 작성
>>

- HTML 요소는 렌더링 엔진에 의해 파싱되어 DOM을 구성하는 요소 노드 객체로 변환된다.
- 이때 HTML 요소의 어트리뷰트는 어트리뷰트 노드로, HTML 요소의 텍스트 콘텐츠는 텍스트 노드로 변환된다.
- HTML 문서는 HTML 요소들의 집합으로 이뤄지며, HTML 요소는 중첩 관계를 갖는다.
- HTML 요소의 콘텐츠 영역은 텍스트뿐 아니라 다른 HTML 요소도 포함될 수 있다.
- HTML 요소 간에는 중첩 관계에 의해 계층적인 부자(parent-child)관계가 형성된다.
- 이러한 부자 관계를 반영해 HTML 요소를 객체화한 모든 노드 객체들을 트리 자료 구조로 구성한다.
- 트리 자료구조

> - 트리 자료 구조(tree data structure)는 노드들의 계층 구조로 이뤄진다.
> - 부모 노드와 자식 노드로 구성되어 노드 간의 계층적 구조를 표현하는 비선형 자료구조를 말한다.
> - 트리 자료구조는 하나의 최상위 노드에서 시작하고, 취상위 노드는 부모 노드가 없으며 루트 노드라고도 한다.
> - 자식 노드가 없는 노드를 리프 노드(leaf node)라고 한다.
> - 노드 객체들로 구성된 트리 자료 구조를 DOM이라 한다. DOM 트리라고 부르기도 한다.

*** 39.1.2 노드 객체 타입

```html

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <ul>
      <li id="tiger">Tiger</li>
      <li id="bear">Bear</li>
      <li id="lion">Lion</li>
    </ul>
    <script src="app.js"></script>
  </body>
</html>

```

- 문서노드-요소노드(어트리뷰트 노드)-텍스트노드 의 계층구조를 이룬다.
- 노드 객체는 총 12개 종류(노드 타입)가 있다. 그 중 4가지가 중요한 노드 타입이다.
- 그 외에도 주석을 위한 Comment 노드 ,DOCTYPE을 위한 DocumentType 노드, 복수의 노드를 생성하여 추가할 때 사용하는 DocumentFragment 노드 등이 있다.

※ 문서노드(Document Node), 요소노드(Element Node), 어트리뷰트 노드(Attribute Node), 텍스트 노드(Text Node)는 HTML 문서의 계층 구조를 형성하는 요소들이다.

-문서 노드(document node)

>> 최상위 노드로 HTML 문서 전체를 나타낸다.
>> 문서의 시작과 끝을 의미하며, 모든 요소들의 조상 노드이다.
>>
>> <html> 요소가 문서노드를 나타낸다.
>>

> - 문서노드는 DOM 트리의 최상위에 존재하는 루트 노드로서 document 객체를 가리킨다. document 객체는 브라우저가 렌더링한 HTML 문서 전체를 가리키는 객체로서 전역 객체 window의 document 프로퍼티에 바인딩되어 있다.
> - 문서 노드는 window.document 또는 document로 참조할 수 있다.
> - 브라우저 환경의 모든 자바스크립트 코드는 script 태그에 의해 분리되어 있어도 하나의 전역 객체 window를 공유한다.
> - 즉, 전역 객체의 window의 document 객체를 바라보게 되어 HTML 문서당 document 객체는 유일하다 할 수 있다.
> - 문서노드인 document 객체는 DOM 트리의 루트 노드로서, DOM 트리의 노드들에 접근하기 위한 진입점 역할을 담당한다. (요소 ,어트리뷰트, 텍스트 노드에 접근하려면 문서 노드를 통해야 한다.)

- 요소 노드(element node)

> - HTML 요소를 가리키는 객체로, 요소 노드는 HTML 요소 간의 중첩에 의해 부자 관계를 가지며, 이 부자 관계를 통해 정보를 구조화한다.
> - 즉, 요소 노드는 문서의 구조를 표현하다고 할 수 있다.
> - <div>, <p>, <img> 등의 HTML 요소들이 요소노드

- 어트리뷰트 노드(attribute node)

> - 어트리뷰트 노드는 HTML 요소의 어트리뷰트를 가리키는 객체다.
> - 어트리뷰트 노드는 어트리뷰트가 지정된 HTML 요소의 요소 노드와 연결되어 있다.
> - 단, 요소 노드는 부모 노드와 연결되어 있지만 어트리뷰트 노드는 부모 노드와 연결되어 있지 않고 요소 노드에만 연결되어 있다. 즉, 어트리뷰트 노드는 부모 노드가 없으므로 요소 노드의 형제 노드는 아니다.
> - 어트리뷰트 노드에 접근하여 어트리뷰트를 참조하거나 변경하려면 먼저 요소 노드에 접근해야 한다.
> - `<img>` 요소의 src, alt와 같은 속성들이 어트리뷰트 노드

- 텍스트 노드(text node)

> - HTML 요소의 텍스트를 가리키는 객체다.
> - 텍스트 노드는 문서의 정보를 표현한다.
> - 텍스트 노드는 요소 노드의 자식 노드이며, 자식 노드를 가질 수 없는 리프 노드다.
> - 즉, 텍스트 노드는 DOM 트리의 최종단이다.
> - 텍스트 노드에 접근하려면 먼저 부모 노드인 요소 노드에 접근해야 한다.

*** 39.1.3 노드 객체의 상속 구조

- DOM을 구성하는 노드 객체는 자신의 구조와 정보를 제어할 수 있는 DOM API를 사용할 수 있다.
- 이를 통해 자신의 부모, 형제, 자식을 탐색할 수 있고, 자신의 어트리뷰트와 텍스트를 조작할 수도 있다.
- DOM을 구성하는 노드 객체는 ECMAScript 사양에 정의된 표준 빌트인 객체가 아니라 브라우저 환경에서 추가적으로 제공하는 호스트 객체다.
- 하지만 노드 객체도 자바스크립트 객체이므로 프로토타입에 의한 상속 구조를 갖는다.
- 노드 객체는 Object, EventTarget, Node 인터페이스를 상속받는다.
- 문서 노드는 Document, HTMLDocument 인터페이스를 상속받는다.
- 어트리뷰트 노드는 Attr 인터페이스를 상속받는다.
- 텍스트 노드는 CharacterData 인터페이스를 각각 상속받는다.
- 요소 노드는 Element 인터페이스를 상속받는다.
- HTMLElement와 태그 종류별로 세분화된 HTMLElement, HTMLHeadElement, HTMLBodyElement, HTMLUListElement 등의 인터페이스를 상속받는다.
- input 요소 객체는 HTMLInputElement 프로토타입을 상속 받기 때문에 그 상위 프로토타입인 Object, EventTarget, Node, Element, HTMLElement의 프로토타입 프로퍼티나 메서드를 상속받아 사용할 수 있다.
- input 요소 노드 객체는 다음과 같은 특성을 갖는다.

> - input 요소 노드 객체의 특성	프로토타입을 제공하는 객체

>> - 객체	Object
>> - 이벤트를 발생시키는 객체	EventTarget
>> - 트리 자료구조의 노드 객체	Node
>> - 브라우저가 렌더링할 수 있는 웹 문서의 요소(HTML, XML, SVG)를 표현하는 객체	Element
>> - 웹 문서의 요소 중에서 HTML 요소를 표현하는 객체	HTMLElement
>> - HTML 요소 중에서 input 요소를 표현하는 객체	HTMLInputElement
>> - 노드 객체의 상속 구조는 개발자 도구의 Elements 패널 우측의 Properties 패널에서 확인할 수 있다.
>>

- 노드 객체에는 노드 타입 상관없이 모든 노드 객체가 갖고 있는 공통 기능도 있으며, 노드 타입에 따라 다른 고유한 기능도 있다.

> - 이벤트 관련 기능은 공통 기능이다.(EventTarget 인터페이스)
> - 트리 탐색 기능은 공통 기능이다.(Node 인터페이스)
> - 노드 정보 제공 기능은 공통 기능이다.(Node 인터페이스)
> - input 요소 노드 객체는 value 프로퍼티를 필요로 한다.
> - div 요소 노드 객체는 value 프로퍼티가 필요하지 않다.
> - HTML 요소가 객체화된 요소 노드 객체는 HTML 요소가 갖는 공통적인 기능이 있다.

- HTML 요소의 스타일을 나타내는 style 프로퍼티는 input 요소 노드 객체, div 요소 노드 객체가 모두 갖고 있다. (HTMLElement 인터페이스)
- 노드 객체는 공통된 기능일수록 프로토타입 체인의 상위에, 개별적 고유 기능일수록 프로토타입 체인 하위에 프로토타입 체인을 구축해 노드 객체에 필요한 기능(프로퍼티, 메서드)을 제공하는 상속 구조를 갖는다.
- DOM은 HTML 문서의 계층적 구조와 정보를 표현하는 것은 물론 노드 객체의 종류, 즉 노드 타입에 따라 필요한 기능을 프로퍼티와 메서드의 집합인 DOM API로 제공한다.
- 이 DOM API를 통해 HTML의 구조나 내용 또는 스타일 등을 동적으로 조작할 수 있다.
- 노드 객체는 상속을 통해 마치 자신의 프로퍼티와 메서드처럼 DOM API를 사용할 수 있다.

중요한 것은 DOM API..

DOM API(DOM Application Programming Interface)는 Document Object Model의 응용 프로그래밍 인터페이스다. DOM은 웹 페이지의 구조화된 내용을 표현하는 데 사용되는 표준화된 트리 기반 API로서, HTML, XML 또는 XHTML 문서를 자바스크립트와 같은 스크립트 언어로 조작할 수 있도록 제공된다.
DOM API는 웹 페이지의 요소들을 선택하고 조작하여 동적인 웹 애플리케이션을 구현하는 데 사용된다.

DOM API는 다양한 메서드와 프로퍼티를 포함하고 있으며, 주요한 DOM API에는 다음과 같은 것들이 있다.

> - Document: 웹 페이지를 대표하는 문서 객체를 나타낸다. DOM 트리의 최상위에 위치하며, 웹 페이지 내의 모든 요소들에 대한 접근을 제공한다.
> - Element: 웹 페이지의 HTML 요소를 나타내는 객체이다. 예를 들어, `<div>`, `<p>`, `<h1>` 등의 HTML 요소들은 모두 Element 객체이다.
> - Node: DOM 트리의 노드를 나타내며, 요소 노드, 텍스트 노드, 속성 노드 등 다양한 종류의 노드를 포함한다.
> - Event: 이벤트를 처리하는데 사용되는 객체로서, 웹 페이지에서 발생하는 이벤트(예: 클릭, 키보드 입력 등)에 대한 처리를 담당한다.

- DOM API를 사용하여 웹 페이지의 요소를 선택하고, 새로운 요소를 생성하거나, 기존 요소의 스타일이나 내용을 변경하고, 이벤트를 처리하는 등 다양한 작업을 수행할 수 있다. 이를 통해 자바스크립트를 이용하여 웹 페이지의 동적인 동작을 구현가능.
